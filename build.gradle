/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'java'
    id 'maven'
}

group = 'io.helidon.mp.mybatisplus'
version = '1.0.0'
description = 'helidon-mp-mybatisplus'
sourceCompatibility = '1.8'
targetCompatibility = '1.8'

ext {
    helidonversion = '1.4.1'
}

repositories {
    mavenCentral()
    mavenLocal()
    maven {
        url = 'http://repo.maven.apache.org/maven2'
    }
    flatDir {
       dirs 'libs'
    }    
}

dependencies {
    compile "io.helidon:helidon-bom:1.4.1"
    compile 'io.helidon.microprofile.bundles:helidon-microprofile:1.4.1'
    compile 'org.glassfish.jersey.media:jersey-media-json-binding:2.29.1'
    compile 'io.helidon.integrations.cdi:helidon-integrations-cdi-datasource-hikaricp:1.4.1'
    compile 'com.baomidou:mybatis-plus:3.3.0'
    compile 'org.mybatis:mybatis-cdi:1.1.1'
    compile 'javax:javaee-api:8.0.1'
    compile 'oracle:ojdbc:8'
    compile 'oracle:oraclepki:8'
    compile 'oracle:osdt_core:8'
    compile 'oracle:osdt_cert:8'
    runtime 'org.jboss:jandex:2.1.1.Final'
    runtime 'javax.activation:javax.activation-api:1.2.0'
    testCompile 'org.junit.jupiter:junit-jupiter-api:5.1.0'
}

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}

// define a custom task to copy all dependencies in the runtime classpath
// into build/libs/libs
// uses built-in Copy
task copyLibs(type: Copy) {
  from configurations.runtime
  into 'build/libs/libs'
}

// add it as a dependency of built-in task 'assemble'
copyLibs.dependsOn jar
assemble.dependsOn copyLibs

// default jar configuration
// set the main classpath
// add each jar under build/libs/libs into the classpath
jar {
  archiveName = "${project.name}.jar"
  manifest {
    attributes ('Main-Class': 'io.helidon.mp.mybatisplus.Main',
                'Class-Path': configurations.runtime.files.collect { "libs/$it.name" }.join(' ')
               )
  }
}
